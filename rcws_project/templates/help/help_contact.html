{% extends 'base.html' %}
{% load static %}

{% block title %}문의하기 - RCWS{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Page title -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="page-title-box bg-gradient-info text-white rounded-3 shadow-sm" style="background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);">
                <div class="d-flex justify-content-between align-items-center p-4">
                    <div class="page-title-left">
                        <h2 class="page-title mb-2 fw-bold" style="font-size: 2rem; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <i class="mdi mdi-email me-3"></i>문의하기
                        </h2>
                        <ol class="breadcrumb m-0" style="font-size: 0.95rem;">
                            <li class="breadcrumb-item">
                                <a href="{% url 'dashboard:main' %}" class="text-white-75 text-decoration-none">
                                    <i class="mdi mdi-home me-1"></i>홈
                                </a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="{% url 'help:main' %}" class="text-white-75 text-decoration-none">
                                    <i class="mdi mdi-help-circle me-1"></i>사용 설명서
                                </a>
                            </li>
                            <li class="breadcrumb-item active text-white" aria-current="page">
                                <i class="mdi mdi-chevron-right mx-2"></i>문의하기
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <!-- 문의 폼 -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="mdi mdi-email-outline me-2"></i>문의하기
                    </h5>
                </div>
                <div class="card-body">
                    <form id="contactForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">이름 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">이메일 <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="department" class="form-label">부서</label>
                                <select class="form-select" id="department" name="department">
                                    <option value="">부서 선택</option>
                                    <option value="hr">인사팀</option>
                                    <option value="it">IT팀</option>
                                    <option value="management">경영팀</option>
                                    <option value="other">기타</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="priority" class="form-label">우선순위</label>
                                <select class="form-select" id="priority" name="priority">
                                    <option value="low">낮음</option>
                                    <option value="medium" selected>보통</option>
                                    <option value="high">높음</option>
                                    <option value="urgent">긴급</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="category" class="form-label">문의 유형 <span class="text-danger">*</span></label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="">유형 선택</option>
                                <option value="technical">기술적 문제</option>
                                <option value="account">계정 관련</option>
                                <option value="feature">기능 요청</option>
                                <option value="bug">버그 신고</option>
                                <option value="general">일반 문의</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="subject" class="form-label">제목 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="subject" name="subject" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="message" class="form-label">문의 내용 <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="message" name="message" rows="6" required placeholder="문의하실 내용을 자세히 작성해주세요..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="attachment" class="form-label">첨부 파일</label>
                            <input type="file" class="form-control" id="attachment" name="attachment" multiple>
                            <div class="form-text">최대 3개 파일, 각 파일 5MB 이하 (PDF, JPG, PNG, DOC, DOCX)</div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-secondary me-md-2" onclick="resetForm()">
                                <i class="mdi mdi-refresh me-1"></i>초기화
                            </button>
                            <button type="submit" class="btn btn-info">
                                <i class="mdi mdi-send me-1"></i>문의하기
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 문의 가이드라인 -->
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="mdi mdi-lightbulb me-2"></i>문의 작성 가이드라인
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6 class="text-warning mb-3">
                                <i class="mdi mdi-check-circle me-1"></i>효과적인 문의 방법
                            </h6>
                            <ul class="small text-muted">
                                <li>구체적이고 명확한 제목 작성</li>
                                <li>문제 상황을 자세히 설명</li>
                                <li>재현 가능한 단계별 설명</li>
                                <li>관련 스크린샷 첨부</li>
                                <li>브라우저 및 OS 정보 포함</li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6 class="text-danger mb-3">
                                <i class="mdi mdi-close-circle me-1"></i>피해야 할 사항
                            </h6>
                            <ul class="small text-muted">
                                <li>모호하고 추상적인 설명</li>
                                <li>감정적인 표현 사용</li>
                                <li>너무 많은 정보 한번에 전달</li>
                                <li>개인정보 포함</li>
                                <li>중복 문의</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 사이드바 -->
        <div class="col-lg-4">
            <!-- 연락처 정보 -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h6 class="mb-0">
                        <i class="mdi mdi-phone me-2"></i>연락처 정보
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-primary mb-2">
                            <i class="mdi mdi-email me-1"></i>이메일
                        </h6>
                        <p class="small text-muted mb-0">support@reverseclinic.com</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-success mb-2">
                            <i class="mdi mdi-phone me-1"></i>전화번호
                        </h6>
                        <p class="small text-muted mb-0">02-1234-5678</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-info mb-2">
                            <i class="mdi mdi-clock me-1"></i>응답 시간
                        </h6>
                        <p class="small text-muted mb-0">평일 09:00 - 18:00</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-warning mb-2">
                            <i class="mdi mdi-calendar me-1"></i>처리 시간
                        </h6>
                        <p class="small text-muted mb-0">1-3 영업일 내</p>
                    </div>
                </div>
            </div>

            <!-- 문의 유형별 가이드 -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0">
                        <i class="mdi mdi-help-circle me-2"></i>문의 유형별 가이드
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-danger mb-2">기술적 문제</h6>
                        <p class="small text-muted mb-0">시스템 오류, 로그인 문제, 기능 사용 불가 등</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-warning mb-2">계정 관련</h6>
                        <p class="small text-muted mb-0">비밀번호 재설정, 권한 변경, 계정 잠금 등</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-info mb-2">기능 요청</h6>
                        <p class="small text-muted mb-0">새로운 기능 추가, 기존 기능 개선 등</p>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-secondary mb-2">버그 신고</h6>
                        <p class="small text-muted mb-0">예상과 다른 동작, 오류 메시지 등</p>
                    </div>
                </div>
            </div>

            <!-- 빠른 링크 -->
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-white">
                    <h6 class="mb-0">
                        <i class="mdi mdi-link me-2"></i>빠른 링크
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="{% url 'help:faq' %}" class="btn btn-outline-warning btn-sm">
                            <i class="mdi mdi-frequently-asked-questions me-2"></i>FAQ 보기
                        </a>
                        <a href="{% url 'help:main' %}" class="btn btn-outline-info btn-sm">
                            <i class="mdi mdi-help-circle me-2"></i>도움말 메인
                        </a>
                        <a href="{% url 'dashboard:main' %}" class="btn btn-outline-primary btn-sm">
                            <i class="mdi mdi-view-dashboard me-2"></i>대시보드
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1) !important;
}

.btn-outline-warning:hover,
.btn-outline-info:hover,
.btn-outline-primary:hover {
    transform: translateY(-1px);
}

.form-control:focus,
.form-select:focus {
    border-color: #17a2b8;
    box-shadow: 0 0 0 0.2rem rgba(23, 162, 184, 0.25);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contactForm');
    
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 폼 유효성 검사
        if (!validateForm()) {
            return;
        }
        
        // 문의 제출 처리
        submitInquiry();
    });
});

function validateForm() {
    const requiredFields = ['name', 'email', 'category', 'subject', 'message'];
    
    for (let field of requiredFields) {
        const element = document.getElementById(field);
        if (!element.value.trim()) {
            alert('필수 항목을 모두 입력해주세요.');
            element.focus();
            return false;
        }
    }
    
    // 이메일 형식 검사
    const email = document.getElementById('email').value;
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        alert('올바른 이메일 형식을 입력해주세요.');
        document.getElementById('email').focus();
        return false;
    }
    
    return true;
}

function submitInquiry() {
    // 실제 구현에서는 서버로 데이터 전송
    alert('문의가 성공적으로 접수되었습니다.\n빠른 시일 내에 답변드리겠습니다.');
    
    // 폼 초기화
    resetForm();
}

function resetForm() {
    document.getElementById('contactForm').reset();
}
</script>
{% endblock %} 