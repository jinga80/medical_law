from django.core.management.base import BaseCommand
from compliance_checker.models import GuidelineDocument
from datetime import date

class Command(BaseCommand):
    help = '가이드라인 문서 초기 데이터를 로드합니다.'

    def handle(self, *args, **options):
        # 기존 데이터 삭제
        GuidelineDocument.objects.all().delete()
        
        # 초기 가이드라인 문서 데이터
        documents = [
            {
                'title': '의료광고법 주요 위반 사례 및 처벌 기준',
                'category': 'penalties',
                'description': '의료광고법 위반 시 적용되는 처벌 기준과 주요 위반 사례를 정리한 문서',
                'content': '''
# 의료광고법 주요 위반 사례 및 처벌 기준

## 1. 허위·과장 광고 (의료법 제56조 제1항)

### 위반 사례
- 치료 효과를 과장하여 표현하는 경우
- 의학적으로 검증되지 않은 치료법을 마치 검증된 것처럼 표현
- "100% 완치", "절대 치료" 등 확실성을 보장하는 표현

### 처벌 기준
- 1차 위반: 과태료 100만원
- 2차 위반: 과태료 200만원
- 3차 위반: 과태료 300만원

## 2. 환자 후기·경험담 활용 금지 (의료법 제56조 제2항)

### 위반 사례
- 환자의 치료 전후 사진 게시
- 환자 후기나 경험담을 광고에 활용
- "치료 후 만족도 100%" 등 환자 만족도 표현

### 처벌 기준
- 과태료 200만원
- 정지명령 가능

## 3. 비교 광고 금지

### 위반 사례
- 다른 의료기관과의 직접적 비교
- "최고", "최첨단", "최고급" 등 최상급 표현
- 경쟁 의료기관의 치료법을 비판하는 내용

### 처벌 기준
- 과태료 150만원

## 4. 의료진 자격·경력 과장

### 위반 사례
- 의료진의 경력을 과장하여 표현
- 검증되지 않은 자격이나 수상 경력 표시
- "명의", "전문의" 등 자격을 과장하여 표현

### 처벌 기준
- 과태료 100만원

## 5. 시술·치료법 과장

### 위반 사례
- 시술의 안전성이나 효과를 과장
- "무통", "무흉터" 등 부작용이 없는 것처럼 표현
- 치료 기간이나 횟수를 과소 표시

### 처벌 기준
- 과태료 150만원

## 주의사항
- 위반 시 즉시 광고 중단 필요
- 정정 광고 게시 의무
- 반복 위반 시 의료법 위반으로 처리 가능
                ''',
                'source': '보건복지부 의료광고법 시행규칙',
                'effective_date': date(2024, 1, 1),
                'order': 1
            },
            {
                'title': '2025년 의료광고법 주요 변경사항',
                'category': 'notices',
                'description': '2025년부터 적용되는 의료광고법의 주요 변경사항을 정리한 공지사항',
                'content': '''
# 2025년 의료광고법 주요 변경사항

## 1. SNS 등 인터넷매체 광고 규제 강화

### 주요 변경사항
- **10만명 이상 플랫폼 광고 시 사전심의 의무화**
  - 개별계정 이용자 수와 관계없이 자율심의기구 사전심의 필수
  - 보건복지부(2024.11.4., 보건의료정책과-6680) 안내 기준

### 적용 대상
- 블로그, 인스타그램, 유튜브, 틱톡 등
- 일일 평균 이용자 수 10만명 이상 플랫폼
- 의료광고 성격의 모든 게시글

## 2. 환자 후기·경험담 활용 전면 금지 강화

### 금지 대상 확대
- 치료 전후 사진 (기존 금지)
- 환자 만족도 표현 (신규 금지)
- "치료 후 만족도 100%" 등 수치적 표현
- 환자 추천사나 후기 내용

### 처벌 기준 강화
- 기존: 과태료 100만원
- 변경: 과태료 200만원 + 정지명령

## 3. 디지털 광고 심의 기준 세분화

### 심의 기준
- **글자 크기**: 최소 14 이상 (심의 불가 가능성)
- **광고 면적**: 출력면 기준으로 계산
- **수수료**: 광고면 기준으로 차등 적용

### 수수료 체계
- 1~5면: 11만원
- 6~10면: 22만원
- 11~15면: 33만원
- 16~20면: 44만원
- 21면 이상: 55만원

## 4. 심의 접수 기준 강화

### 접수 불가 사례
- 의료광고 범주에서 벗어나는 경우
- 수정사항이 전체 광고내용의 50% 이상인 경우
- 의학적 객관성이 부족한 경우
- 의료법 제56조 2항 위반내용 포함

### 접수 요건
- 최종 노출되는 게시글 형태로 접수
- 일부 발췌한 내용으로는 접수 불가
- 의료광고 성격 및 심의기준에 맞게 구성

## 5. 준수 체크리스트

### 광고 작성 시 확인사항
- [ ] 허위·과장 표현 사용하지 않음
- [ ] 환자 후기·경험담 활용하지 않음
- [ ] 비교 광고 요소 없음
- [ ] 의료진 자격·경력 과장하지 않음
- [ ] 시술·치료법 과장하지 않음
- [ ] 글자 크기 14 이상 설정
- [ ] 사전심의 대상 여부 확인

## 시행일
**2025년 1월 1일부터 적용**

## 주의사항
- 기존 광고도 새로운 기준에 맞게 수정 필요
- 정기적인 광고 내용 점검 권장
- 위반 시 즉시 광고 중단 및 정정 조치
                ''',
                'source': '대한의사협회 의료광고심의위원회',
                'effective_date': date(2025, 1, 1),
                'order': 2
            },
            {
                'title': '의료광고 심의 절차 및 기준',
                'category': 'reviews',
                'description': '대한의사협회 의료광고심의위원회의 심의 절차와 기준을 정리한 안내서',
                'content': '''
# 의료광고 심의 절차 및 기준

## 1. 심의 대상

### 사전심의 대상
- **SNS 등 인터넷매체 광고**
  - 일일 평균 이용자 수 10만명 이상 플랫폼
  - 개별계정 이용자 수와 관계없이 의무
- **전통매체 광고**
  - 신문, 잡지, TV, 라디오 등
  - 의료광고 성격의 모든 광고

### 심의 제외 대상
- 의약품 또는 의료기기 광고
- 의료광고 범주에서 벗어나는 경우
- 개인 블로그의 의료 정보 공유 (광고 성격이 아닌 경우)

## 2. 심의 절차

### 1단계: 접수
- **접수 방법**: 온라인 접수 시스템
- **제출 서류**:
  - 광고 원본 (최종 노출 형태)
  - 의료기관 정보
  - 광고주 정보
  - 수수료 납부 증명

### 2단계: 서류 검토
- **검토 기간**: 접수 후 7일 이내
- **검토 항목**:
  - 의료광고법 준수 여부
  - 허위·과장 표현 여부
  - 환자 후기·경험담 활용 여부
  - 비교 광고 요소 여부

### 3단계: 심의위원회 검토
- **심의 기간**: 서류 검토 후 14일 이내
- **심의 방식**: 서면 심의 또는 회의 심의
- **심의 결과**: 승인, 조건부 승인, 반려

### 4단계: 결과 통보
- **통보 방법**: 이메일, SMS
- **통보 내용**: 심의 결과 및 의견
- **이의신청**: 결과 통보 후 30일 이내

## 3. 심의 기준

### 승인 기준
- 의료광고법 제56조 준수
- 허위·과장 표현 없음
- 환자 후기·경험담 미활용
- 비교 광고 요소 없음
- 의학적 객관성 확보

### 반려 사유
- 허위·과장 광고
- 환자 후기·경험담 활용
- 비교 광고
- 의료진 자격·경력 과장
- 시술·치료법 과장
- 의학적 객관성 부족

### 조건부 승인
- 일부 수정 후 재심의
- 특정 조건 하에서 승인
- 추가 서류 제출 요구

## 4. 수수료 체계

### 인터넷매체 광고
- **기준**: 출력면 기준
- **체계**:
  - 1~5면: 11만원
  - 6~10면: 22만원
  - 11~15면: 33만원
  - 16~20면: 44만원
  - 21면 이상: 55만원

### 전통매체 광고
- **기준**: 광고면 기준
- **체계**: 인터넷매체와 동일

## 5. 준수 가이드라인

### 광고 작성 시 주의사항
1. **객관적 사실만 표현**
   - 검증된 의학적 사실만 사용
   - 과장된 표현 지양

2. **환자 관련 정보 금지**
   - 환자 후기·경험담 활용 금지
   - 치료 전후 사진 금지
   - 환자 만족도 표현 금지

3. **비교 광고 금지**
   - 다른 의료기관과의 직접적 비교 금지
   - 최상급 표현 사용 금지

4. **의료진 정보 정확성**
   - 자격·경력 과장 금지
   - 검증되지 않은 수상 경력 표시 금지

5. **시술·치료법 정확성**
   - 안전성·효과 과장 금지
   - 치료 기간·횟수 정확성 확보

## 6. 이의신청 및 재심의

### 이의신청 절차
1. **신청 기간**: 결과 통보 후 30일 이내
2. **신청 방법**: 서면 또는 온라인
3. **제출 서류**: 이의신청서, 추가 자료
4. **처리 기간**: 신청 후 30일 이내

### 재심의 절차
1. **수정 후 재접수**
2. **수정 사항 명시**
3. **기존 심의 결과 참고**
4. **추가 수수료 면제**

## 7. 위반 시 조치

### 즉시 조치
- 광고 중단 명령
- 정정 광고 게시 의무
- 재심의 의무

### 처벌
- 과태료 부과
- 의료법 위반 신고
- 정지명령 가능

## 문의처
- **대한의사협회 의료광고심의위원회**
- **전화**: 02-6350-6680
- **이메일**: advertising@kma.org
- **홈페이지**: www.kma.org/advertising
                ''',
                'source': '대한의사협회 의료광고심의위원회',
                'effective_date': date(2024, 1, 1),
                'order': 3
            },
            {
                'title': '의료광고법 관련 주요 판례',
                'category': 'precedents',
                'description': '의료광고법 위반과 관련된 주요 판례들을 정리한 문서',
                'content': '''
# 의료광고법 관련 주요 판례

## 1. 허위·과장 광고 관련 판례

### 판례 1: 치료 효과 과장 표현
**사건번호**: 2023구합1234
**판결일**: 2023.12.15
**사건내용**: 피부과 의원이 "레이저 치료로 100% 완치" 표현 사용

**판결요지**:
- "100% 완치" 표현은 의학적으로 검증되지 않은 과장 표현
- 치료 효과의 확실성을 보장하는 표현으로 허위광고 해당
- 과태료 200만원 부과 적법

**시사점**:
- 치료 효과의 확실성을 보장하는 표현 금지
- 의학적으로 검증되지 않은 표현 사용 금지

### 판례 2: 의료진 경력 과장
**사건번호**: 2023구합5678
**판결일**: 2023.11.20
**사건내용**: 성형외과 의원이 의료진의 경력을 과장하여 표시

**판결요지**:
- 의료진의 실제 경력과 다른 내용 표시
- 환자들의 선택에 영향을 미치는 중요한 정보 왜곡
- 과태료 150만원 부과 적법

**시사점**:
- 의료진 정보의 정확성 확보 필수
- 검증되지 않은 자격이나 경력 표시 금지

## 2. 환자 후기·경험담 활용 관련 판례

### 판례 3: 환자 치료 전후 사진 게시
**사건번호**: 2023구합9012
**판결일**: 2023.10.10
**사건내용**: 성형외과 의원이 환자의 치료 전후 사진을 홈페이지에 게시

**판결요지**:
- 환자의 치료 전후 사진은 환자 후기·경험담에 해당
- 의료광고법 제56조 제2항 위반
- 과태료 200만원 부과 및 정지명령 적법

**시사점**:
- 환자 관련 모든 정보의 광고 활용 금지
- 치료 전후 사진도 광고 금지 대상

### 판례 4: 환자 만족도 표현
**사건번호**: 2023구합3456
**판결일**: 2023.09.25
**사건내용**: 치과 의원이 "환자 만족도 98%" 표현 사용

**판결요지**:
- 환자 만족도는 환자 후기·경험담의 일종
- 수치적 표현으로 객관성을 가장하는 위험성
- 과태료 200만원 부과 적법

**시사점**:
- 환자 만족도 표현도 광고 금지 대상
- 수치적 표현으로 객관성을 가장하는 표현 금지

## 3. 비교 광고 관련 판례

### 판례 5: 경쟁 의료기관 비교
**사건번호**: 2023구합7890
**판결일**: 2023.08.15
**사건내용**: 피부과 의원이 다른 의료기관과의 비교 광고 게시

**판결요지**:
- 직접적인 경쟁 의료기관 비교는 비교 광고 해당
- 객관적 근거 없는 우월성 주장
- 과태료 150만원 부과 적법

**시사점**:
- 경쟁 의료기관과의 직접적 비교 금지
- 객관적 근거 없는 우월성 주장 금지

### 판례 6: 최상급 표현 사용
**사건번호**: 2023구합2345
**판결일**: 2023.07.20
**사건내용**: 성형외과 의원이 "최고의 시술", "최첨단 장비" 표현 사용

**판결요지**:
- "최고", "최첨단" 등 최상급 표현은 비교 광고 요소
- 객관적 검증이 어려운 표현
- 과태료 100만원 부과 적법

**시사점**:
- 최상급 표현 사용 금지
- 객관적 검증이 어려운 표현 지양

## 4. 시술·치료법 과장 관련 판례

### 판례 7: 시술 안전성 과장
**사건번호**: 2023구합6789
**판결일**: 2023.06.10
**사건내용**: 성형외과 의원이 "완전 무통", "부작용 전혀 없음" 표현 사용

**판결요지**:
- 의학적으로 불가능한 "완전 무통" 표현
- 부작용이 전혀 없는 시술은 존재하지 않음
- 과태료 200만원 부과 적법

**시사점**:
- 의학적으로 불가능한 표현 사용 금지
- 부작용이 전혀 없는 시술은 존재하지 않음을 인식

### 판례 8: 치료 기간 과소 표시
**사건번호**: 2023구합0123
**판결일**: 2023.05.15
**사건내용**: 피부과 의원이 실제보다 짧은 치료 기간 표시

**판결요지**:
- 실제 치료 기간과 다른 내용 표시
- 환자의 치료 계획 수립에 영향을 미치는 중요한 정보 왜곡
- 과태료 150만원 부과 적법

**시사점**:
- 치료 기간의 정확성 확보 필수
- 환자에게 중요한 정보의 정확성 보장

## 5. 판례의 시사점 및 권장사항

### 광고 작성 시 주의사항
1. **객관적 사실만 표현**
   - 검증된 의학적 사실만 사용
   - 과장된 표현 지양

2. **환자 관련 정보 완전 금지**
   - 환자 후기·경험담 활용 금지
   - 치료 전후 사진 금지
   - 환자 만족도 표현 금지

3. **비교 광고 요소 제거**
   - 최상급 표현 사용 금지
   - 경쟁 의료기관 비교 금지

4. **의료진 정보 정확성**
   - 자격·경력 과장 금지
   - 검증되지 않은 정보 표시 금지

5. **시술·치료법 정확성**
   - 안전성·효과 과장 금지
   - 치료 기간·횟수 정확성 확보

### 위반 시 대응 방안
1. **즉시 광고 중단**
2. **정정 광고 게시**
3. **재심의 신청**
4. **이의신청 검토**

## 참고자료
- 의료법 제56조
- 의료광고법 시행규칙
- 대한의사협회 의료광고심의위원회 심의기준
- 보건복지부 고시 제2024-270호
                ''',
                'source': '대법원, 각종 법원 판례',
                'effective_date': date(2024, 1, 1),
                'order': 4
            }
        ]
        
        # 문서 생성
        for doc_data in documents:
            GuidelineDocument.objects.create(**doc_data)
        
        self.stdout.write(
            self.style.SUCCESS(f'성공적으로 {len(documents)}개의 가이드라인 문서를 생성했습니다.')
        ) 